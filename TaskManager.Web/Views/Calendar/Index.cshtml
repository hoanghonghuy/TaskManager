@model TaskManager.Web.ViewModels.CalendarViewModel

@{
    ViewData["Title"] = "Lịch";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2 mb-0">Tháng @Model.Month, @Model.Year</h1>
    <div class="btn-group">
        <a class="btn btn-outline-secondary" asp-action="Index" asp-route-month="@(Model.Month - 1)" asp-route-year="@Model.Year">
            <i class="bi bi-chevron-left"></i>
        </a>
        <a class="btn btn-outline-secondary" asp-action="Index" asp-route-month="@(Model.Month + 1)" asp-route-year="@Model.Year">
            <i class="bi bi-chevron-right"></i>
        </a>
    </div>
</div>

<div class="calendar-grid">
    <!-- Hàng tiêu đề các thứ trong tuần -->
    <div class="calendar-header">
        <div>Thứ hai</div>
        <div>Thứ ba</div>
        <div>Thứ tư</div>
        <div>Thứ năm</div>
        <div>Thứ sáu</div>
        <div>Thứ bảy</div>
        <div>Chủ nhật</div>
    </div>

    <!-- Các ô ngày trong lịch -->
    <div class="calendar-body">
        @foreach (var day in Model.DaysInGrid)
        {
            var isToday = day.Date == DateTime.Today;
            var isCurrentMonth = day.Month == Model.Month;

            <div class="calendar-day @(isCurrentMonth ? "" : "day-other-month")">
                <div class="day-number @(isToday ? "day-today" : "")">
                    @day.Day
                </div>

                @if (Model.TasksByDay.ContainsKey(day.Date))
                {
                    <div class="day-tasks">
                        @foreach (var task in Model.TasksByDay[day.Date])
                        {
                            // panel chi tiết công việc
                            <a href="#" class="task-event view-task-details" data-task-id="@task.Id">
                                @task.Title
                            </a>
                        }
                    </div>
                }
            </div>
        }
    </div>
</div>

